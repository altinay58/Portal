@model FrmViewData
@using Portal.Models;
@{
    ViewBag.Title = "ArayanEkle";
}

<form class="form-horizontal" id="arayanEkle" name="arayanEkle" method="post" action="@Url.Action("ArayanEkle","Arayanlar")">
 @Html.AntiForgeryToken()
    <div style="margin:0 auto;width:95%">
        <div class="form-body">
            <div class="form-group">

                <label class="control-label col-md-2">Firma Adı</label>
                <div class="col-md-4">
                    <input type="text" name="firmaAdi" id="firmaAdi" class="form-control" />
                    <input type="hidden" name="firmaId" id="firmaId" />
                </div>
                <label class="control-label col-md-2">Adı</label>
                <div class="col-md-4">
                    <input type="text" name="adi" class="form-control" />
                </div>
            </div>
            <div class="form-group">

                <label class="control-label col-md-2">Soyadı</label>
                <div class="col-md-4">
                    <input type="text" name="soyadi" class="form-control" />
                   
                </div>
                <label class="control-label col-md-2">Firma Sahi Özellik</label>
                <div class="col-md-4">
                    <input type="text" name="firmaOzellik" class="form-control" />
                </div>
            </div>
            <div class="form-group">

                <label class="control-label col-md-2">Arayan Grubu</label>
                <div class="col-md-4">
                    @Html.DropDownList("arayanGrupID",ViewBag.arayanGrupID as SelectList,new { @class= "form-control select2" })
                 </div>
                <label class="control-label col-md-2">Telefon No</label>
                <div class="col-md-4">
                    <input type="text" name="firmaOzellik" class="form-control" />
                </div>
            </div>
            <div class="form-group">

                <label class="control-label col-md-2">Cep Tel No</label>
                <div class="col-md-4">
                    @Html.TextBoxFor(x=>x.Arayanlar.arayanCepTelNo,new {@class="form-control" })
                </div>
                <label class="control-label col-md-2">Mail Adresi</label>
                <div class="col-md-4">
                    @Html.TextBoxFor(x => x.Arayanlar.arayanMailAdresi, new { @class = "form-control" })
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-md-2">Web Adresi</label>
                <div class="col-md-4">
                    @Html.TextAreaFor(x => x.Arayanlar.arayanWebAdresi, new { @class = "form-control" })
                </div>
                <label class="control-label col-md-2">Tam Adresi</label>
                <div class="col-md-4">
                    @Html.TextAreaFor(x => x.Arayanlar.arayanAdres, new { @class = "form-control" })
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-md-2">Şehir</label>
                <div class="col-md-4">
                    @Html.TextBoxFor(x => x.Arayanlar.arayanSehir, new { @class = "form-control" })
                </div>
                <label class="control-label col-md-2">İlçe</label>
                <div class="col-md-4">
                    @Html.TextBoxFor(x => x.Arayanlar.arayanilce, new { @class = "form-control" })
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-md-2">Bölge Adı</label>
                <div class="col-md-4">
                    @Html.DropDownList("arayanRefKonumID", ViewBag.arayanRefKonumID as SelectList, new { @class = "form-control select2" })
                </div>
                <label class="control-label col-md-2">Konu</label>
                <div class="col-md-4">
                    @Html.TextAreaFor(x => x.Arayanlar.arayanKonu, new { @class = "form-control" })
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-md-2">Not</label>
                <div class="col-md-4">
                    @Html.TextAreaFor(x => x.Arayanlar.arayanNot, new { @class = "form-control" })
                </div>
                <label class="control-label col-md-2">Konu</label>
                <div class="col-md-4">
                    @Html.TextAreaFor(x => x.Arayanlar.arayanBegendigiWebSiteleri, new { @class = "form-control" })
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-md-2">Tarih</label>
                <div class="col-md-4">

                    @*@Html.TextBoxFor(x => x.Arayanlar.arayanKayitTarih, new { @class = "form-control",id="Tarih" })*@
                    <div class="input-group  date date-picker" data-date-format="dd.MM.yyyy">
                        <input type="text" is-date="1" class="form-control" name="Arayanlar.arayanKayitTarih" id="Tarih" data-date-format="dd.mm.yyyy">
                        <span class="input-group-btn">
                            <button class="btn default" type="button">
                                <i class="fa fa-calendar"></i>
                            </button>
                           
                        </span>
                        <div class="input-group">
                            <input type="text" class="form-control timepicker timepicker-24" style="width:50px;padding:2px">
                            <span class="input-group-btn">
                                <button class="btn default" type="button">
                                    <i class="fa fa-clock-o"></i>
                                </button>
                            </span>
                        </div>
                        @*<input type="text" class="form-control timepicker timepicker-24" style="width:50px;padding:2px">*@
                    </div>
                </div>
                <label class="control-label col-md-2">Proje Tipi</label>
                <div class="col-md-3">
                    @Html.DropDownList("arayanDomainKategoriID", ViewBag.arayanDomainKategoriID as SelectList, new { @class = "form-control select2" })
                </div>
               
               
            </div>
            <div class="form-group">
                <label class="control-label col-md-2">Sektör Adı</label>
                <div class="col-md-4">
                    @Html.DropDownList("arayanSektorID", ViewBag.arayanSektorID as SelectList, new { @class = "form-control select2" })
                </div>
                <label class="control-label col-md-2">Mail Şabşonları</label>
                <div class="col-md-4">
                    @Html.DropDownList("mailSablonlari", ViewBag.arayanSektorID as SelectList,String.Empty, new { @class = "form-control select2" })
                </div>
            </div>
           
            <div class="form-group">
                <label class="col-md-offset-2 col-md-2 isEkle">                   
                        <input type="checkbox" value="" class="iCheck" id="cbIsEkle">İş ekle                       
                    </label>

            </div>
            <div id="divIs" style="display:block">
                <div class="form-group">
                    <div class="col-md-offset-2 col-md-10">
                        <textarea class="ckeditor form-control" name="isAciklama" rows="6"></textarea>
                    </div>

                </div>
                
                    <div class="col-md-offset-2 col-md-10">
                        <div class="row">
                          
                                <div class="col-md-3 box">
                                    <div class="form-group">
                                        <label class="">Yapacak Kişi</label>
                                        @Html.DropDownList("islerisiYapacakKisi", ViewBag.islerisiYapacakKisi as SelectList, new { @class = "form-control select2" })
                                    </div>
                                </div>
                                <div class="col-md-3 box">
                                    <div class="form-group">
                                        <label class="">Yapacak Kişi</label>
                                        @Html.DropDownList("islerisiYapacakKisi", ViewBag.islerisiYapacakKisi as SelectList, new { @class = "form-control select2" })
                                    </div>
                                </div>
                                <div class="col-md-3 box">
                                    <div class="form-group">
                                        <label class="">Yapacak Kişi</label>
                                        @Html.DropDownList("islerisiYapacakKisi", ViewBag.islerisiYapacakKisi as SelectList, new { @class = "form-control select2" })
                                    </div>
                                </div>
                                <div class="col-md-3 box">
                                    <div class="form-group">
                                      <label class="">                   
                        <input type="checkbox" value="" class="iCheck" id="cbDeadline">İş ekle                       
                    </label>
                                        <div class="input-group">
                                            <input type="text" is-date="1" class="form-control" name="deadline" id="deadline" data-date-format="dd.mm.yyyy" style="width:100% !important">
                                            <span class="input-group-btn">
                                                <button class="btn default" type="button">
                                                    <i class="fa fa-calendar"></i>
                                                </button>

                                            </span>
                                        </div>
                                       
                                    </div>
                                </div>
                            <div class="col-md-3 box">
                                <div class="form-group">
                                    <label class="">Geliş Yöntemi</label>
                                    <select name="gelisYonetemi" class="form-control select2">
                                        <option selected="selected">Telefon</option>
                                        <option>Email</option>
                                        <option>Whatsapp</option>
                                        <option>Yüz yüze</option>
                                    </select> 
                                </div>
                            </div>
                        </div>
                    </div>

              
            </div>
            <div class="form-group">
                <label class="col-md-offset-2 col-md-2">
                    <button type="submit" class="btn green">Kaydet</button>
                </label>

            </div>
       
          
        </div>
    </div>
</form>

@section css{
<link href="/Content/assets/global/plugins/icheck/skins/all.css" rel="stylesheet" type="text/css" />
    <link href="/Content/assets/global/plugins/select2/css/select2.min.css" rel="stylesheet" type="text/css" />
    <link href="/Content/assets/global/plugins/select2/css/select2-bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="/Content/assets/global/plugins/bootstrap-datepicker/css/bootstrap-datepicker3.min.css" rel="stylesheet" type="text/css" />
    <link href="/Content/assets/global/plugins/typeahead/typeahead.css" rel="stylesheet" type="text/css" />
<link href="/Content/assets/global/plugins/bootstrap-datetimepicker/css/bootstrap-datetimepicker.min.css" rel="stylesheet" type="text/css" />
<link href="/Content/assets/global/plugins/bootstrap-timepicker/css/bootstrap-timepicker.min.css" rel="stylesheet" type="text/css" />
    <style>
 
        .datepicker.dropdown-menu {
            z-index: 9999 !important;
        }
    </style>
    <style>
        #whoisbilgileri {
            height: 500px;
            width: 100%;
            overflow-y: auto;
            overflow-x: hidden;
        }
         .mt-checkbox, .mt-radio {
            font-size: 10px;
        }
    </style>
}1
@section scripts{
<script src="/Content/assets/global/plugins/icheck/icheck.min.js" type="text/javascript"></script> 
<script src="/Content/assets/global/plugins/ckeditor/ckeditor.js" type="text/javascript"></script>
<script src="/Content/assets/global/plugins/moment.min.js" type="text/javascript"></script>

<script src="/Content/assets/global/plugins/bootstrap-datepicker/js/bootstrap-datepicker.min.js" type="text/javascript"></script>
<script src="/Content/assets/global/plugins/bootstrap-timepicker/js/bootstrap-timepicker.min.js" type="text/javascript"></script>
<script src="/Content/assets/global/plugins/bootstrap-datetimepicker/js/bootstrap-datetimepicker.min.js" type="text/javascript"></script>
    <script src="/Content/assets/global/plugins/select2/js/select2.full.min.js" type="text/javascript"></script>
    <script src="/Content/assets/global/plugins/jquery-validation/js/jquery.validate.min.js"></script>
   

   
    <script src="/Content/assets/global/plugins/typeahead/typeahead.bundle.min.js" type="text/javascript"></script>

  
    <script>
        window.onload = function () {
            $("#divIs").css("display", "none");
        }
                $(function () {                  
                    $('.iCheck').iCheck({
                        checkboxClass: 'icheckbox_minimal-red',
                        radioClass: 'iradio_minimal-red',
                        increaseArea: '20%'  // optional</span>
                    })
                    $('.isEkle .iCheck').on('ifChecked', function (event) {
                        $(this).closest("input").attr('checked', true);
                        $("#divIs").css("display", "block");
                    });
                    $('.isEkle .iCheck').on('ifUnchecked', function (event) {
                        $(this).closest("input").attr('checked', false);
                        $("#divIs").css("display", "none");
                    });
                   
                    validateForm();
                    $(".select2").select2();
                   
                    $.fn.datepicker.dates['tr'] = {
                        days: ["Pazar", "Pazartesi", "Salı", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"],
                        daysShort: ["Paz", "Pzt", "Sal", "Çar", "Per", "Cum", "Cmt", "Paz"],
                        daysMin: ["Paz", "Pzt", "Sal", "Çar", "Per", "Cum", "Cmt", "Paz"],
                        months: ["Ocak", "Şubat", "Mart", "Nisan", "Mayıs", "Haziran", "Temmuz", "Ağustos", "Eylül", "Ekim", "Kasım", "Aralık"],
                        monthsShort: ["Oca", "Şub", "Mar", "Nis", "May", "Haz", "Tem", "Ağu", "Eyl", "Eki", "Kas", "Ara"],
                        today: "Bugün"
                    };
                 
                  
                    $("input[is-date='1']").datepicker({
                        autoclose: true,
                        language: 'tr'
                    });
                    $(".timepicker-24").timepicker({
                        autoclose: true,
                        minuteStep: 5,
                        showSeconds: false,
                        showMeridian: false
                    })
                    //$(".timepicker-24").click(function (t) {
                       
                    //    t.preventDefault();
                    //    $(this).timepicker("showWidget")
                    //})
                    $(".timepicker").parent(".input-group").on("click", ".input-group-btn", function (t) {
                        t.preventDefault(), $(this).parent(".input-group").find(".timepicker").timepicker("showWidget")
                    })
                    $("input[is-date='1']").val("@System.DateTime.Today.ToString("dd.MM.yyyy")");
                    $("input[is-date='1']").datepicker('update');
                    $("input[is-date='1']").parent('.input-group').on('click', '.input-group-btn', function (e) {
                        e.preventDefault();
                        $(this).parent('.input-group').find("input[is-date='1']").datepicker('show');
                    });
                    var firmas = new Bloodhound({
                        datumTokenizer: function (datum) {
                            return Bloodhound.tokenizers.whitespace(datum.label);
                        },
                        queryTokenizer: Bloodhound.tokenizers.whitespace,
                        remote: {
                            wildcard: '',
                            url: '/Isler/FirmalariGetir',
                            replace: function (url, query) {

                                url += "?firmaAdi=" + $("#FirmaAdi").val();

                                return url;
                            },
                            transform: function (response) {
                                return response;

                            }
                        }
                    });
                    $('#FirmaAdi').typeahead(null, {
                        display: 'label',
                        displayKey: 'value',
                        hint: true,
                        minLength: 1,
                        source: firmas
                    });

                    $('#FirmaAdi').on('typeahead:selected', function (event, datum) {

                        $('#RefDomainFirmaID').val(datum.value);

                    });
                    //Firma autocomplete
                })
                function validateForm() {
                    //**validation
                    var form1 = $('#form1');
                    var error1 = $('.alert-danger', form1);
                    var success1 = $('.alert-success', form1);

                    form1.validate({
                        errorElement: 'span', //default input error message container
                        errorClass: 'help-block help-block-error', // default input error message class
                        focusInvalid: false, // do not focus the last invalid input
                        ignore: "",  // validate all fields including form hidden input
                        messages: {
                            FirmaAdi: "Lütfen firma ismi giriniz.",
                            DomainAdi: "Lütfen Domain adi giriniz.",
                            Tarih: "Lütfen tarih seçiniz.",
                            IpAdres: "Lütfen ip adresi giriniz."
                        },
                        rules: {
                            FirmaAdi: {
                                minlength: 2,
                                required: true
                            },
                            DomainAdi: {
                                minlength: 2,
                                required: true
                            },
                            Tarih: {
                                minlength: 9,
                                required: true
                            },
                            IpAdres: {
                                minlength: 9,
                                required: true
                            }

                        },

                        invalidHandler: function (event, validator) { //display error alert on form submit
                            success1.hide();
                            error1.show();
                            App.scrollTo(error1, -200);
                        },

                        highlight: function (element) { // hightlight error inputs
                            $(element)
                                .closest('.form-group').addClass('has-error'); // set error class to the control group
                        },

                        unhighlight: function (element) { // revert the change done by hightlight
                            $(element)
                                .closest('.form-group').removeClass('has-error'); // set error class to the control group
                        },

                        success: function (label) {
                            label
                                .closest('.form-group').removeClass('has-error'); // set success class to the control group
                        },

                        submitHandler: function (form) {
                            //success1.show();
                            //error1.hide();
                            $('#form1')[0].submit();
                        }
                    });




                    //**end validation
                }
    </script>
}
